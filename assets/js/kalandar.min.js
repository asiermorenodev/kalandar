class Kalandar{constructor(t){const e={selector:"",date:new Date,dayNames:["Sun","Mon","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],weekStart:0,highlightedDates:{},minYear:0,maxYear:2024,fitWeeks:!0,onDayClick:(t,e,s)=>{},onDayRender:(t,e)=>{},onLoad:t=>{},onClear:t=>{},onNavigation:t=>{},beforeRender:t=>{},afterRender:t=>{}};let s,a;if(("object"!=typeof t||Array.isArray(t)||null===t)&&(t={}),this.options={...e,...t},"string"==typeof this.options.selector&&""!==this.options.selector){if(null===document.querySelector(this.options.selector))return void console.error("Invalid selector");s=document.querySelector(this.options.selector),s.classList.add("kalandar")}else s=document.createElement("div"),s.classList.add("kalandar"),document.body.appendChild(s);switch(this.container=s,Object.prototype.toString.call(this.options.date)){case"[object Undefined]":default:a=new Date;break;case"[object Date]":a=this.options.date;break;case"[object String]":a=new Date(this.options.date),this.isValidDate(a)||(a=new Date,console.log(this.options.date+" is not a valid date string format."))}this.month=a.getMonth(),this.year=a.getFullYear(),this.today=new Date,"string"==typeof this.options.weekStart?this.options.weekStart=parseInt(this.options.weekStart):"number"!=typeof this.options.weekStart&&(this.options.weekStart=e.weekStart),"string"==typeof this.options.minYear?this.options.minYear=parseInt(this.options.minYear):"number"!=typeof this.options.minYear&&(this.options.minYear=e.minYear),"string"==typeof this.options.maxYear?this.options.maxYear=parseInt(this.options.maxYear):"number"!=typeof this.options.maxYear&&(this.options.maxYear=e.maxYear),"string"==typeof this.options.fitWeeks?"true"===this.options.fitWeeks.toLowerCase()?this.options.fitWeeks=!0:this.options.fitWeeks=!1:"boolean"!=typeof this.options.fitWeeks&&(this.options.fitWeeks=e.fitWeeks),this.render(),this.options.onLoad()}render(){this.options.beforeRender(this),this.container.replaceChildren(),this.options.onClear(),this._renderNavigation(),this._renderDaysOfWeek(),this._renderMonth(),this.options.afterRender(this)}_renderNavigation(){const t=this,e=document.createElement("div");e.classList.add("navigation");const s=document.createElement("button");s.classList.add("prev"),s.textContent="<";const a=this.options.minYear;0===this.month&&this.year===a?s.classList.add("disabled"):s.addEventListener("click",(()=>{this.prevMonth(),this.options.onNavigation(t)}));const i=document.createElement("div");i.classList.add("period");const n=document.createElement("span");n.classList.add("month"),n.textContent=this.options.monthNames[this.month];const o=document.createElement("span");o.classList.add("separator"),o.textContent=" ";const r=document.createElement("span");r.classList.add("year"),r.textContent=this.year,i.appendChild(n),i.appendChild(o),i.appendChild(r);const d=document.createElement("button");d.classList.add("next"),d.textContent=">";const h=this.options.maxYear;11===this.month&&this.year===h?d.classList.add("disabled"):d.addEventListener("click",(()=>{this.nextMonth(),this.options.onNavigation(t)})),e.appendChild(s),e.appendChild(i),e.appendChild(d),this.container.appendChild(e)}_renderDaysOfWeek(){const t=document.createElement("div");t.classList.add("days-of-week");const e=this.options.dayNames;for(let s=0;s<e.length;s++){const a=document.createElement("span");a.classList.add("day-name"),a.textContent=e[s],t.appendChild(a)}this.container.appendChild(t)}_renderMonth(){const t=this,e=document.createElement("div");e.classList.add("days-of-month");const s=new Date(this.year,this.month,1),a=new Date(this.year,this.month+1,0),i=new Date(s.getTime());i.setDate(s.getDate()-s.getDay());const n=new Date(a.getTime());if(this.options.fitWeeks){const t=864e5,e=7*6-a.getDate()-Math.round((s.getTime()-i.getTime())/t);n.setDate(a.getDate()+e)}else n.setDate(a.getDate()+(6-a.getDay()));let o=new Date(i.getTime());for(;o.getTime()<=n.getTime();){const s=document.createElement("div");s.classList.add("day"),s.setAttribute("data-date",this.dateToString(o));const a=document.createElement("span");a.classList.add("text"),a.textContent=o.getDate(),s.appendChild(a),o.getMonth()!==this.month&&s.classList.add("fill"),this.isToday(o)&&s.classList.add("today"),this.isWeekend(o)&&s.classList.add("weekend");const i=this.getHighlightedDateData(o);i&&(void 0!==i.class&&s.classList.add(i.class),void 0!==i.label?(s.setAttribute("aria-label",i.label),""!==i.label&&s.classList.add("has-label")):s.setAttribute("aria-label","")),s.addEventListener("click",(e=>{t.options.onDayClick(t,s,e)})),this.options.onDayRender(t,s),e.appendChild(s),o.setDate(o.getDate()+1)}this.container.appendChild(e)}nextMonth(){const t=new Date(this.year,this.month+1,0),e=new Date(t.getTime());e.setDate(t.getDate()+1),this.month=e.getMonth(),this.year=e.getFullYear(),this.render()}prevMonth(){const t=new Date(this.year,this.month,1),e=new Date(t.getTime());e.setDate(t.getDate()-1),e.getFullYear()>=this.options.minYear&&(this.month=e.getMonth(),this.year=e.getFullYear(),this.render())}isToday(t){const e=this.today;return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}isWeekend(t){return[0,6].includes(t.getDay())}getHighlightedDateData(t){const e=this.dateToString(t);return void 0!==this.options.highlightedDates[e]&&(this.options.highlightedDates[e]||!1)}isValidDate(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())}dateToString(t){return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`}}